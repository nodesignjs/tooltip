{"version":3,"file":"index.2c69de25.js","sources":["../../vite/modulepreload-polyfill","../../node_modules/.pnpm/@nodesign+popper@1.1.1/node_modules/@nodesign/popper/lib/constant.js","../../node_modules/.pnpm/wblib@1.0.14/node_modules/wblib/lib/env.js","../../node_modules/.pnpm/wblib@1.0.14/node_modules/wblib/lib/is.js","../../node_modules/.pnpm/wblib@1.0.14/node_modules/wblib/lib/destroyable.js","../../node_modules/.pnpm/wblib@1.0.14/node_modules/wblib/lib/dom.js","../../node_modules/.pnpm/wblib@1.0.14/node_modules/wblib/lib/drag.js","../../node_modules/.pnpm/wblib@1.0.14/node_modules/wblib/lib/format.js","../../node_modules/.pnpm/wblib@1.0.14/node_modules/wblib/lib/fn.js","../../node_modules/.pnpm/@nodesign+popper@1.1.1/node_modules/@nodesign/popper/lib/popper.js","../../src/tooltip.ts","../../demo/index.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","var PLACEMENT = /* @__PURE__ */ ((PLACEMENT2) => {\n  PLACEMENT2[\"T\"] = \"t\";\n  PLACEMENT2[\"TL\"] = \"tl\";\n  PLACEMENT2[\"TR\"] = \"tr\";\n  PLACEMENT2[\"B\"] = \"b\";\n  PLACEMENT2[\"BL\"] = \"bl\";\n  PLACEMENT2[\"BR\"] = \"br\";\n  PLACEMENT2[\"L\"] = \"l\";\n  PLACEMENT2[\"LT\"] = \"lt\";\n  PLACEMENT2[\"LB\"] = \"lb\";\n  PLACEMENT2[\"R\"] = \"r\";\n  PLACEMENT2[\"RT\"] = \"rt\";\n  PLACEMENT2[\"RB\"] = \"rb\";\n  return PLACEMENT2;\n})(PLACEMENT || {});\nvar EmitType = /* @__PURE__ */ ((EmitType2) => {\n  EmitType2[\"HOVER\"] = \"hover\";\n  EmitType2[\"CLICK\"] = \"click\";\n  return EmitType2;\n})(EmitType || {});\nexport {\n  EmitType,\n  PLACEMENT\n};\n","const isBrowser = typeof window !== 'undefined';\r\nconst isTouch = isBrowser && ('ontouchstart' in window || navigator.maxTouchPoints > 0);\n\nexport { isBrowser, isTouch };\n","const toString = Object.prototype.toString;\r\nfunction isString(o) {\r\n    return typeof o === 'string' || o instanceof String;\r\n}\r\nfunction isBool(o) {\r\n    return o === true || o === false || (toString.call(o) === '[object Boolean]');\r\n}\r\nfunction isFunction(o) {\r\n    return typeof o === 'function';\r\n}\r\nfunction isNumber(o) {\r\n    return typeof o === 'number' || (toString.call(o) === '[object Number]');\r\n}\r\nfunction isValidNumber(o) {\r\n    const r = isNumber(o);\r\n    if (!r)\r\n        return r;\r\n    // eslint-disable-next-line no-restricted-globals\r\n    return (!isNaN(o) && isFinite(o));\r\n}\n\nexport { isBool, isFunction, isNumber, isString, isValidNumber };\n","import { isBrowser } from './env.js';\nimport { isBool } from './is.js';\n\nlet thirdOptsSupported = false;\r\nif (isBrowser) {\r\n    try {\r\n        const options = Object.defineProperty({}, 'once', { get() { thirdOptsSupported = true; } });\r\n        window.addEventListener('test', null, options);\r\n        // eslint-disable-next-line no-empty\r\n    }\r\n    catch (e) { }\r\n}\r\nclass DomListener {\r\n    constructor(node, type, handler, options) {\r\n        this.node = node;\r\n        this.type = type;\r\n        this.handler = handler;\r\n        this.options = options;\r\n        this.options = isBool(options) ? options : options ? (thirdOptsSupported && options) : false;\r\n        node.addEventListener(type, handler, this.options);\r\n    }\r\n    destroy() {\r\n        if (!this.node)\r\n            return;\r\n        this.node.removeEventListener(this.type, this.handler, this.options);\r\n        this.node = null;\r\n    }\r\n}\r\nconst destroyableMap = new Map();\r\nfunction getDestroyableMap() {\r\n    return destroyableMap;\r\n}\r\nfunction addDestroyable(key, destroyable) {\r\n    if (!destroyableMap.has(key))\r\n        destroyableMap.set(key, []);\r\n    destroyableMap.get(key).push(destroyable);\r\n    return destroyable;\r\n}\r\nfunction callAndRemoveDestroyable(key, destroyable) {\r\n    if (!destroyable)\r\n        return;\r\n    if (destroyableMap.has(key)) {\r\n        destroyableMap.set(key, destroyableMap.get(key).filter((x) => x !== destroyable));\r\n    }\r\n    destroyable.destroy();\r\n}\r\nfunction destroy(key) {\r\n    if (destroyableMap.has(key)) {\r\n        destroyableMap.get(key).forEach((item) => item.destroy());\r\n        destroyableMap.delete(key);\r\n    }\r\n}\r\nfunction addDestroyableListener(key, el, type, listener, options) {\r\n    const domListener = new DomListener(el, type, listener, options);\r\n    if (key)\r\n        addDestroyable(key, domListener);\r\n    return domListener;\r\n}\n\nexport { DomListener, addDestroyable, addDestroyableListener, callAndRemoveDestroyable, destroy, getDestroyableMap };\n","import { isString } from './is.js';\n\nconst SELECTOR_REGEX = /([\\w-]+)?(?:#([\\w-]+))?((?:\\.(?:[\\w-]+))*)/;\r\nfunction $(desc, attrs, children, classPrefix = '') {\r\n    let match = [];\r\n    if (desc)\r\n        match = SELECTOR_REGEX.exec(desc) || [];\r\n    const el = document.createElement(match[1] || 'div');\r\n    if (match[2])\r\n        el.id = match[3];\r\n    if (match[3])\r\n        el.className = match[3].replace(/\\./g, ` ${classPrefix}`).trim();\r\n    if (attrs) {\r\n        Object.keys(attrs).forEach((name) => {\r\n            const value = attrs[name];\r\n            if (value === undefined)\r\n                return;\r\n            if (name === 'selected') {\r\n                if (value) {\r\n                    el.setAttribute(name, 'true');\r\n                }\r\n            }\r\n            else {\r\n                el.setAttribute(name, value);\r\n            }\r\n        });\r\n    }\r\n    if (children) {\r\n        if (isString(children)) {\r\n            el.innerHTML = children;\r\n        }\r\n        else {\r\n            children.forEach((c) => el.appendChild(c));\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction removeNode(node) {\r\n    if (!node)\r\n        return;\r\n    if (node.remove) {\r\n        node.remove();\r\n    }\r\n    else if (node.parentNode) {\r\n        node.parentNode.removeChild(node);\r\n    }\r\n}\r\nfunction addClass(dom, cls = '', prefix = '') {\r\n    cls = cls.trim();\r\n    if (!cls)\r\n        return dom;\r\n    if (dom.classList) {\r\n        cls.split(' ').forEach((c) => dom.classList.add(prefix + c));\r\n    }\r\n    else {\r\n        const oldCls = (dom.className && dom.className.baseVal) || '';\r\n        dom.setAttribute('class', (oldCls ? `${oldCls} ` : '') + cls.split(' ').map((c) => prefix + c).join(' '));\r\n    }\r\n    return dom;\r\n}\r\nfunction removeClass(dom, cls, prefix = '') {\r\n    dom.classList.remove(prefix + cls);\r\n    return dom;\r\n}\r\nfunction containClass(dom, cls, prefix = '') {\r\n    return dom.classList.contains(prefix + cls);\r\n}\r\nfunction toggleClass(dom, cls, force, prefix = '') {\r\n    cls = prefix + cls;\r\n    if (force) {\r\n        dom.classList.add(cls);\r\n        return true;\r\n    }\r\n    if (force === false) {\r\n        dom.classList.remove(cls);\r\n        return true;\r\n    }\r\n    return dom.classList.toggle(cls, force);\r\n}\r\nfunction show(node) {\r\n    node.style.display = '';\r\n}\r\nfunction hide(node) {\r\n    node.style.display = 'none';\r\n}\r\nfunction create$(desc2, attrs2, children2, classPrefix2) {\r\n    return (desc, attrs, children, classPrefix = '') => $(desc || desc2, attrs || attrs2, children || children2, classPrefix || classPrefix2);\r\n}\r\nconst svgNS = 'http://www.w3.org/2000/svg';\n\nexport { $, addClass, containClass, create$, hide, removeClass, removeNode, show, svgNS, toggleClass };\n","class Drag {\r\n    constructor(el, start, move, end) {\r\n        this.el = el;\r\n        this.start = start;\r\n        this.move = move;\r\n        this.end = end;\r\n        this.pending = false;\r\n        this.downHandler = (ev) => {\r\n            this.el.setPointerCapture(ev.pointerId);\r\n            this.el.addEventListener('pointermove', this.moveHandler, true);\r\n            this.el.addEventListener('pointerup', this.upHandler, true);\r\n            this.el.addEventListener('pointercancel', this.upHandler, true);\r\n            this.start(ev);\r\n        };\r\n        this.moveHandler = (ev) => {\r\n            this.lastEv = ev;\r\n            if (this.pending)\r\n                return;\r\n            this.pending = true;\r\n            this.rafId = requestAnimationFrame(this.handlerMove);\r\n        };\r\n        this.handlerMove = () => {\r\n            this.move(this.lastEv);\r\n            this.pending = false;\r\n        };\r\n        this.upHandler = (ev) => {\r\n            this.removePointerEvents();\r\n            this.pending = false;\r\n            if (this.end) {\r\n                cancelAnimationFrame(this.rafId);\r\n                this.end(ev);\r\n            }\r\n        };\r\n        this.el = el;\r\n        this.start = start;\r\n        this.move = move;\r\n        this.end = end;\r\n        el.addEventListener('pointerdown', this.downHandler, true);\r\n    }\r\n    removePointerEvents() {\r\n        this.el.removeEventListener('pointermove', this.moveHandler, true);\r\n        this.el.removeEventListener('pointerup', this.upHandler, true);\r\n        this.el.removeEventListener('pointercancel', this.upHandler, true);\r\n    }\r\n    destroy() {\r\n        if (!this.el)\r\n            return;\r\n        this.el.removeEventListener('pointerdown', this.downHandler, true);\r\n        this.removePointerEvents();\r\n        this.el = null;\r\n    }\r\n}\n\nexport { Drag };\n","function padStart(v, len = 2, str = '0') {\r\n    v = String(v);\r\n    if (v.padStart)\r\n        return v.padStart(len, str);\r\n    if (v.length >= len)\r\n        return v;\r\n    for (let i = 0, l = len - v.length; i < l; i++) {\r\n        v = str + v;\r\n    }\r\n    return v;\r\n}\r\nfunction formatTime(seconds) {\r\n    // eslint-disable-next-line no-restricted-globals\r\n    if (!isFinite(seconds) || isNaN(seconds))\r\n        return '';\r\n    if (!seconds)\r\n        return '0:00';\r\n    const isNeg = seconds < 0;\r\n    if (isNeg)\r\n        seconds *= -1;\r\n    let ret;\r\n    seconds = Math.round(seconds);\r\n    if (seconds < 60) {\r\n        ret = `0:${padStart(seconds)}`;\r\n    }\r\n    else if (seconds < 3600) {\r\n        ret = `${~~(seconds / 60)}:${padStart(seconds % 60)}`;\r\n    }\r\n    else {\r\n        ret = `${~~(seconds / 3600)}:${padStart(~~((seconds % 3600) / 60))}:${padStart(seconds % 60)}`;\r\n    }\r\n    return isNeg ? `-${ret}` : ret;\r\n}\r\nfunction clamp(n, lower = 0, upper = 1) {\r\n    return Math.max(Math.min(n, upper), lower);\r\n}\n\nexport { clamp, formatTime };\n","import { isBrowser } from './env.js';\nimport { isFunction } from './is.js';\n\nfunction throttle(fn, ctx) {\r\n    let pending = false;\r\n    let first = true;\r\n    let args = null;\r\n    return function () {\r\n        args = arguments;\r\n        if (first) {\r\n            first = false;\r\n            return fn.apply(ctx, args);\r\n        }\r\n        if (pending)\r\n            return;\r\n        pending = true;\r\n        requestAnimationFrame(() => {\r\n            fn.apply(ctx, args);\r\n            pending = false;\r\n        });\r\n    };\r\n}\r\nfunction throttleTime(fn, time = 0, ctx) {\r\n    let pending = false;\r\n    let first = true;\r\n    let args = null;\r\n    return function () {\r\n        args = arguments;\r\n        if (first) {\r\n            first = false;\r\n            return fn.apply(ctx, args);\r\n        }\r\n        if (pending)\r\n            return;\r\n        pending = true;\r\n        setTimeout(() => {\r\n            fn.apply(ctx, args);\r\n            pending = false;\r\n        }, time);\r\n    };\r\n}\r\nfunction getChangedAttrs(newV, oldV, updateOld = false) {\r\n    const patch = [];\r\n    Object.keys(newV).forEach((x) => {\r\n        if (newV[x] !== oldV[x]) {\r\n            patch.push([x, newV[x], oldV[x]]);\r\n            if (updateOld)\r\n                oldV[x] = newV[x];\r\n        }\r\n    });\r\n    return patch;\r\n}\r\nconst nextTick = isBrowser && 'queueMicrotask' in window && isFunction(queueMicrotask) ? queueMicrotask : (fn) => Promise.resolve().then(fn);\n\nexport { getChangedAttrs, nextTick, throttle, throttleTime };\n","import { $, addClass, throttle, removeClass, getChangedAttrs, destroy, Drag, clamp } from \"wblib\";\nimport { EmitType, PLACEMENT } from \"./constant.js\";\nfunction getConfig(config) {\n  const cfg = {\n    container: document.body,\n    placement: PLACEMENT.T,\n    autoPlacement: true,\n    autoUpdate: true,\n    autoScroll: true,\n    clickOutsideClose: true,\n    closeAni: true,\n    enterable: true,\n    maxHeight: true,\n    ...config\n  };\n  if (!cfg.translate) {\n    cfg.translate = [0, 0];\n  }\n  return cfg;\n}\nfunction createArrow(style, cls) {\n  const el = $();\n  if (cls)\n    addClass(el, cls);\n  Object.assign(el.style, {\n    width: \"10px\",\n    height: \"10px\",\n    transform: \"rotate(45deg)\",\n    transformOrigin: \"center\",\n    ...style\n  });\n  return el;\n}\nclass Popper {\n  constructor(config) {\n    this.opened = false;\n    this.isAnimating = false;\n    this.closed = true;\n    this.popHide = false;\n    this.arrowHide = false;\n    this.onScroll = throttle(() => {\n      if (this.config.closeOnScroll) {\n        this.close();\n      } else {\n        this.update();\n      }\n    });\n    this.onTriClick = () => {\n      if (this.opened) {\n        this.closeWithDelay();\n      } else {\n        this.openWithDelay();\n      }\n    };\n    this.onTriEnter = () => {\n      this.clearOCTimer();\n      if (this.isAnimating)\n        this.closed = false;\n      if (this.opened)\n        return;\n      this.openWithDelay();\n    };\n    this.onTriLeave = () => {\n      this.clearOCTimer();\n      if (this.isAnimating)\n        this.closed = true;\n      if (!this.opened)\n        return;\n      this.closeWithDelay();\n    };\n    this.clearOCTimer = () => {\n      clearTimeout(this.openTimer);\n      clearTimeout(this.closeTimer);\n    };\n    this.removeDocClick = () => {\n      document.removeEventListener(\"pointerdown\", this.onDocClick);\n    };\n    this.onDocClick = ({ target }) => {\n      var _a, _b;\n      const { config: config2 } = this;\n      const { onClickOutside, clickOutsideClose } = config2;\n      if (onClickOutside || clickOutsideClose) {\n        if (((_a = this.el) == null ? void 0 : _a.contains(target)) || this.isTriggerEl && ((_b = config2.trigger) == null ? void 0 : _b.contains(target)) || config2.clickOutsideIgnoreEl && config2.clickOutsideIgnoreEl.contains(target))\n          return;\n        onClickOutside == null ? void 0 : onClickOutside();\n        if (clickOutsideClose)\n          this.closeWithDelay();\n      }\n    };\n    this.onShowTransitionEnd = () => {\n      const { cssName, el } = this;\n      const { onEntered } = this.config;\n      removeClass(el, cssName.enterActive);\n      removeClass(el, cssName.enterTo);\n      this.isAnimating = false;\n      if (onEntered)\n        onEntered();\n      if (this.closed)\n        this.closeWithDelay();\n    };\n    this.onHideTransitionEnd = () => {\n      const { cssName, config: config2, el } = this;\n      const { onExited } = config2;\n      this.hide();\n      removeClass(el, cssName.exitActive);\n      removeClass(el, cssName.exitTo);\n      this.isAnimating = false;\n      if (onExited)\n        onExited();\n      if (!this.closed)\n        this.openWithDelay();\n    };\n    if (config)\n      this.init(config);\n  }\n  init(config) {\n    config = this.config = getConfig(config);\n    this.cel = $();\n    const { style } = this.cel;\n    style.position = \"absolute\";\n    style.left = style.top = \"0\";\n    const {\n      content,\n      container,\n      trigger\n    } = config;\n    if (config.overflowHidden == null)\n      config.overflowHidden = isElClipped(container);\n    this.el = this.cel.appendChild($());\n    this.el.appendChild(content);\n    this.isTriggerEl = trigger instanceof Element;\n    if (config.autoUpdate)\n      this.observe();\n    if (this.needListenScroll()) {\n      this.scrollEls = getScrollElements(trigger, container);\n    }\n    if (config.arrow) {\n      this.arrowEl = createArrowWrapper();\n      this.arrowEl.appendChild(config.arrow);\n      this.el.appendChild(this.arrowEl);\n    }\n    this.setCssName();\n    this.addTriEv();\n    this.addEnterEv();\n    if (config.open) {\n      requestAnimationFrame(() => this.open());\n    }\n    if (config.keepDom) {\n      hideDom(this.cel);\n      container.appendChild(this.cel);\n    }\n  }\n  update() {\n    if (this.opened && !this.isAnimating)\n      this.open();\n  }\n  updateConfig(config) {\n    const changed = getChangedAttrs(config, this.config, true);\n    if (!changed.length)\n      return;\n    changed.forEach(([k, n, o]) => {\n      var _a;\n      switch (k) {\n        case \"content\":\n          this.el.removeChild(o);\n          if (n)\n            this.el.appendChild(n);\n          break;\n        case \"emit\":\n          if (this.isTriggerEl) {\n            this.removeEmitEv();\n            if (n)\n              this.addTriEv();\n          }\n          this.removeEnterEv();\n          this.addEnterEv();\n          break;\n        case \"container\":\n          if (!n)\n            config.container = document.body;\n          if (this.ro) {\n            this.ro.unobserve(o);\n            this.ro.observe(config.container);\n          }\n          break;\n        case \"triggerOpenClass\":\n          if (this.opened && this.isTriggerEl) {\n            const { trigger } = this.config;\n            if (o)\n              removeClass(trigger, o);\n            if (n)\n              addClass(trigger, n);\n          }\n          break;\n        case \"enterable\":\n          this.removeEnterEv();\n          if (n)\n            this.addEnterEv();\n          break;\n        case \"keepDom\":\n          if (n) {\n            if (!this.opened) {\n              hideDom(this.cel);\n              config.container.appendChild(this.cel);\n            }\n          } else if (!this.opened) {\n            config.container.removeChild(this.cel);\n            showDom(this.cel);\n          }\n          break;\n        case \"trigger\":\n          {\n            const oldIsTriggerEl = this.isTriggerEl;\n            const { triggerOpenClass } = this.config;\n            if (oldIsTriggerEl) {\n              this.removeEmitEv(o);\n              if (triggerOpenClass) {\n                removeClass(o, triggerOpenClass);\n              }\n            }\n            this.isTriggerEl = n instanceof Element;\n            if (this.ro) {\n              if (oldIsTriggerEl)\n                this.ro.unobserve(o);\n              if (this.isTriggerEl)\n                this.ro.observe(n);\n            }\n            if (this.isTriggerEl) {\n              this.addTriEv();\n              if (this.opened && triggerOpenClass) {\n                addClass(o, triggerOpenClass);\n              }\n            }\n            const need = this.needListenScroll();\n            if (need) {\n              if (!this.scrollEls) {\n                const c = this.config;\n                this.scrollEls = getScrollElements(c.trigger, c.container);\n              }\n            } else if (this.scrollEls) {\n              this.removeScrollEv();\n              this.scrollEls = void 0;\n            }\n          }\n          break;\n        case \"autoScroll\":\n        case \"closeOnScroll\":\n          {\n            const need = this.needListenScroll();\n            if (need) {\n              if (!this.scrollEls) {\n                const c = this.config;\n                this.scrollEls = getScrollElements(c.trigger, c.container);\n                if (this.opened) {\n                  (_a = this.scrollEls) == null ? void 0 : _a.forEach((x) => {\n                    x.addEventListener(\"scroll\", this.onScroll, { passive: true });\n                  });\n                }\n              }\n            } else if (this.scrollEls) {\n              this.removeScrollEv();\n              this.scrollEls = void 0;\n            }\n          }\n          break;\n        case \"arrow\":\n          if (this.arrowEl) {\n            this.arrowEl.removeChild(o);\n            if (!n) {\n              this.el.removeChild(this.arrowEl);\n              this.arrowEl = void 0;\n            }\n          }\n          if (n) {\n            this.arrowEl = this.arrowEl || createArrowWrapper();\n            this.arrowEl.appendChild(n);\n            this.el.appendChild(this.arrowEl);\n          }\n          break;\n        case \"autoUpdate\":\n          if (n) {\n            if (!this.ro)\n              this.observe();\n          } else if (this.ro) {\n            this.ro.disconnect();\n            this.ro = void 0;\n          }\n          break;\n        case \"cssName\":\n          this.setCssName();\n          break;\n        case \"disabled\":\n          if (n)\n            this.disable();\n          break;\n        case \"maxHeight\":\n          if (!n) {\n            const { style } = config.content;\n            if (style)\n              style.maxHeight = \"\";\n          }\n          break;\n        case \"maxWidth\":\n          if (!n) {\n            const { style } = config.content;\n            if (style)\n              style.maxWidth = \"\";\n          }\n          break;\n      }\n    });\n    this.update();\n  }\n  destroy() {\n    var _a, _b;\n    const { container } = this.config;\n    if (this.ro) {\n      this.ro.disconnect();\n      this.ro = void 0;\n    }\n    if (this.opened) {\n      try {\n        container.removeChild(this.cel);\n      } catch (e) {\n      }\n    }\n    cancelAnimationFrame(this.showRaf);\n    cancelAnimationFrame(this.hideRaf);\n    (_a = this.clearShow) == null ? void 0 : _a.call(this);\n    (_b = this.clearHide) == null ? void 0 : _b.call(this);\n    this.isAnimating = true;\n    this.opened = false;\n    this.removeScrollEv();\n    this.removeDocClick();\n    this.removeEmitEv();\n    this.removeEnterEv();\n    if (this.drag) {\n      this.drag.destroy();\n      this.drag = void 0;\n    }\n    destroy(this);\n  }\n  open() {\n    var _a;\n    if (this.config.disabled)\n      return;\n    this.closed = false;\n    const {\n      config,\n      cssName,\n      opened,\n      el,\n      arrowEl\n    } = this;\n    const { container, trigger } = config;\n    const fromHide = !opened;\n    if (fromHide) {\n      if (this.isAnimating)\n        return;\n      this.show();\n      (_a = this.scrollEls) == null ? void 0 : _a.forEach((x) => {\n        x.addEventListener(\"scroll\", this.onScroll, { passive: true });\n      });\n      document.addEventListener(\"pointerdown\", this.onDocClick);\n    }\n    const cStyle = config.content.style;\n    const needMaxHeight = cStyle && config.maxHeight;\n    const needMaxWidth = cStyle && config.maxWidth;\n    if (needMaxHeight)\n      cStyle.maxHeight = \"\";\n    if (needMaxWidth)\n      cStyle.maxWidth = \"\";\n    this.opened = true;\n    const popBcr = el.getBoundingClientRect();\n    const containerBcr = container.getBoundingClientRect();\n    const arrowBcr = arrowEl == null ? void 0 : arrowEl.getBoundingClientRect();\n    let triggerBcr = trigger.getBoundingClientRect();\n    if (this.isTriggerEl) {\n      triggerBcr = {\n        left: triggerBcr.left - containerBcr.left,\n        top: triggerBcr.top - containerBcr.top,\n        width: triggerBcr.width,\n        height: triggerBcr.height\n      };\n      if (config.triggerOpenClass)\n        addClass(trigger, config.triggerOpenClass);\n    }\n    this.isAnimating = true;\n    if (fromHide && cssName) {\n      const { onBeforeEnter } = config;\n      if (onBeforeEnter)\n        onBeforeEnter();\n      addClass(el, cssName.enterFrom);\n      this.showRaf = requestAnimationFrame(() => {\n        removeClass(el, cssName.enterFrom);\n        addClass(el, cssName.enterActive);\n        addClass(el, cssName.enterTo);\n        const info = this.getTransitionInfo(el, this.showTransInfo);\n        this.showTransInfo = info.info;\n        this.clearShow = info.clear;\n        info.promise.then(this.onShowTransitionEnd);\n      });\n    } else {\n      requestAnimationFrame(() => {\n        this.isAnimating = false;\n      });\n    }\n    const ret = config.useTriggerPos ? {\n      xy: [triggerBcr.left, triggerBcr.top],\n      position: config.placement,\n      maxHeight: needMaxHeight ? containerBcr.height - triggerBcr.top : 0,\n      maxWidth: needMaxWidth ? containerBcr.width - triggerBcr.left : 0\n    } : getPopStyle(\n      config.placement,\n      containerBcr,\n      triggerBcr,\n      popBcr,\n      config.translate,\n      config.autoPlacement,\n      config.overflowHidden,\n      config.coverTrigger,\n      arrowBcr,\n      config.hideOnInvisible,\n      config.changePosOnly,\n      needMaxHeight,\n      needMaxWidth\n    );\n    const { onBeforePosition, onOpen } = config;\n    if (onBeforePosition)\n      onBeforePosition(ret);\n    if (cssName && ret.position !== this.prevP) {\n      if (this.prevP)\n        removeClass(el, `${config.cssName}-${this.prevP}`);\n      this.prevP = ret.position;\n      addClass(el, `${config.cssName}-${ret.position}`);\n    }\n    const { xy } = ret;\n    if (xy) {\n      if (this.popHide) {\n        this.popHide = false;\n        showDom(this.cel);\n      }\n      this.cel.style.transform = `translate3d(${xy[0]}px,${xy[1]}px,0)`;\n      if (needMaxHeight && ret.maxHeight) {\n        cStyle.maxHeight = `${ret.maxHeight}px`;\n      }\n      if (needMaxWidth && ret.maxWidth) {\n        cStyle.maxWidth = `${ret.maxWidth}px`;\n      }\n      if (fromHide && config.dragEl) {\n        const diffXY = [];\n        const curXY = [];\n        const maxX = containerBcr.width - popBcr.width;\n        const maxY = containerBcr.height - popBcr.height;\n        this.drag = new Drag(config.dragEl, (ev) => {\n          diffXY[0] = xy[0] - ev.clientX;\n          diffXY[1] = xy[1] - ev.clientY;\n        }, (ev) => {\n          curXY[0] = clamp(diffXY[0] + ev.clientX, 0, maxX);\n          curXY[1] = clamp(diffXY[1] + ev.clientY, 0, maxY);\n          this.cel.style.transform = `translate3d(${curXY[0]}px,${curXY[1]}px,0)`;\n        }, () => {\n          xy[0] = curXY[0];\n          xy[1] = curXY[1];\n        });\n      }\n    } else if (!this.popHide) {\n      hideDom(this.cel);\n      this.popHide = true;\n    }\n    if (arrowEl) {\n      if (ret.arrowXY) {\n        if (this.arrowHide) {\n          this.arrowHide = false;\n          showDom(arrowEl);\n        }\n        arrowEl.style.transform = `translate(${ret.arrowXY[0]}px,${ret.arrowXY[1]}px)`;\n      } else if (!this.arrowHide) {\n        this.arrowHide = true;\n        hideDom(arrowEl);\n      }\n    }\n    if (fromHide && onOpen)\n      onOpen();\n  }\n  close() {\n    this.closed = true;\n    if (this.isAnimating || !this.opened)\n      return;\n    this.opened = false;\n    const { config, cssName, el } = this;\n    const { onClose } = config;\n    if (config.closeAni && cssName) {\n      const { onBeforeExit } = config;\n      if (onBeforeExit)\n        onBeforeExit();\n      addClass(el, cssName.exitFrom);\n      this.isAnimating = true;\n      this.hideRaf = requestAnimationFrame(() => {\n        removeClass(el, cssName.exitFrom);\n        addClass(el, cssName.exitActive);\n        addClass(el, cssName.exitTo);\n        const info = this.getTransitionInfo(el, this.hideTransInfo);\n        this.hideTransInfo = info.info;\n        this.clearHide = info.clear;\n        info.promise.then(this.onHideTransitionEnd);\n      });\n    } else {\n      this.hide();\n    }\n    if (this.isTriggerEl && config.triggerOpenClass) {\n      removeClass(config.trigger, config.triggerOpenClass);\n    }\n    this.removeScrollEv();\n    this.removeDocClick();\n    if (this.drag) {\n      this.drag.destroy();\n      this.drag = void 0;\n    }\n    if (onClose)\n      onClose();\n    document.removeEventListener(\"pointerdown\", this.onDocClick);\n  }\n  toggle() {\n    if (this.opened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n  enable() {\n    this.config.disabled = false;\n  }\n  disable() {\n    this.config.disabled = true;\n    this.close();\n  }\n  openWithDelay() {\n    this.clearOCTimer();\n    const { openDelay } = this.config;\n    if (openDelay) {\n      this.openTimer = setTimeout(() => {\n        this.open();\n      }, openDelay);\n    } else {\n      this.open();\n    }\n  }\n  closeWithDelay() {\n    this.clearOCTimer();\n    const { closeDelay } = this.config;\n    if (closeDelay) {\n      this.closeTimer = setTimeout(() => {\n        this.close();\n      }, closeDelay);\n    } else {\n      this.close();\n    }\n  }\n  show() {\n    const { config } = this;\n    if (config.keepDom) {\n      showDom(this.cel);\n    } else {\n      config.container.appendChild(this.cel);\n    }\n  }\n  hide() {\n    const { config } = this;\n    if (config.keepDom) {\n      hideDom(this.cel);\n    } else {\n      config.container.removeChild(this.cel);\n    }\n  }\n  removeEmitEv(el) {\n    el = el || this.config.trigger;\n    if (el instanceof Element) {\n      el.removeEventListener(\"click\", this.onTriClick);\n      el.removeEventListener(\"mouseenter\", this.onTriEnter);\n      el.removeEventListener(\"mouseleave\", this.onTriLeave);\n    }\n  }\n  observe() {\n    const { config } = this;\n    const ro = this.ro = new ResizeObserver(() => this.update());\n    ro.observe(this.el);\n    ro.observe(config.container);\n    if (this.isTriggerEl)\n      ro.observe(config.trigger);\n  }\n  addTriEv() {\n    const { config } = this;\n    if (this.isTriggerEl && config.emit) {\n      const { trigger } = config;\n      if (config.emit === EmitType.CLICK) {\n        trigger.addEventListener(\"click\", this.onTriClick);\n      } else {\n        trigger.addEventListener(\"mouseenter\", this.onTriEnter);\n        trigger.addEventListener(\"mouseleave\", this.onTriLeave);\n      }\n    }\n  }\n  addEnterEv() {\n    const { config } = this;\n    if (config.enterable && config.emit === EmitType.HOVER) {\n      this.cel.addEventListener(\"mouseenter\", this.onTriEnter);\n      this.cel.addEventListener(\"mouseleave\", this.onTriLeave);\n    }\n  }\n  removeEnterEv() {\n    this.cel.removeEventListener(\"mouseenter\", this.onTriEnter);\n    this.cel.removeEventListener(\"mouseleave\", this.onTriLeave);\n  }\n  removeScrollEv() {\n    var _a;\n    (_a = this.scrollEls) == null ? void 0 : _a.forEach((x) => x.removeEventListener(\"scroll\", this.onScroll));\n  }\n  getTransitionInfo(el, info) {\n    let clear;\n    const promise = new Promise((resolve) => {\n      const { event, timeout } = info || getTransitionInfo(el);\n      if (timeout) {\n        const fn = () => {\n          clear == null ? void 0 : clear();\n          resolve(null);\n        };\n        el.addEventListener(event, fn);\n        const timer = setTimeout(() => {\n          clear == null ? void 0 : clear();\n          resolve(null);\n        }, timeout + 2);\n        clear = () => {\n          clearTimeout(timer);\n          el.removeEventListener(event, fn);\n        };\n      } else {\n        requestAnimationFrame(resolve);\n      }\n    });\n    return {\n      promise,\n      clear,\n      info\n    };\n  }\n  needListenScroll() {\n    const { config } = this;\n    return this.isTriggerEl && config.container && (config.autoScroll || config.closeOnScroll);\n  }\n  setCssName() {\n    const { cssName } = this.config;\n    this.cssName = cssName ? {\n      enterFrom: `${cssName}-enter-from`,\n      enterActive: `${cssName}-enter-active`,\n      enterTo: `${cssName}-enter-to`,\n      exitFrom: `${cssName}-exit-from`,\n      exitActive: `${cssName}-exit-active`,\n      exitTo: `${cssName}-exit-to`\n    } : void 0;\n  }\n}\nfunction getPopupOffset(position, triggerRect, popWH, translate) {\n  switch (position) {\n    case PLACEMENT.T:\n      return [\n        triggerRect.left + triggerRect.width / 2 - popWH.width / 2 + translate[0],\n        triggerRect.top - popWH.height + translate[1]\n      ];\n    case PLACEMENT.TL:\n      return [\n        triggerRect.left + translate[0],\n        triggerRect.top - popWH.height + translate[1]\n      ];\n    case PLACEMENT.TR:\n      return [\n        triggerRect.left + triggerRect.width - popWH.width + translate[0],\n        triggerRect.top - popWH.height + translate[1]\n      ];\n    case PLACEMENT.B:\n      return [\n        triggerRect.left + triggerRect.width / 2 - popWH.width / 2 + translate[0],\n        triggerRect.top + triggerRect.height + translate[1]\n      ];\n    case PLACEMENT.BL:\n      return [\n        triggerRect.left + translate[0],\n        triggerRect.top + triggerRect.height + translate[1]\n      ];\n    case PLACEMENT.BR:\n      return [\n        triggerRect.left + triggerRect.width - popWH.width + translate[0],\n        triggerRect.top + triggerRect.height + translate[1]\n      ];\n    case PLACEMENT.L:\n      return [\n        triggerRect.left - popWH.width + translate[0],\n        triggerRect.top + triggerRect.height / 2 - popWH.height / 2 + translate[1]\n      ];\n    case PLACEMENT.LT:\n      return [\n        triggerRect.left - popWH.width + translate[0],\n        triggerRect.top + translate[1]\n      ];\n    case PLACEMENT.LB:\n      return [\n        triggerRect.left - popWH.width + translate[0],\n        triggerRect.top + triggerRect.height - popWH.height + translate[1]\n      ];\n    case PLACEMENT.R:\n      return [\n        triggerRect.left + triggerRect.width + translate[0],\n        triggerRect.top + triggerRect.height / 2 - popWH.height / 2 + translate[1]\n      ];\n    case PLACEMENT.RT:\n      return [\n        triggerRect.left + triggerRect.width + translate[0],\n        triggerRect.top + translate[1]\n      ];\n    case PLACEMENT.RB:\n      return [\n        triggerRect.left + triggerRect.width + translate[0],\n        triggerRect.top + triggerRect.height - popWH.height + translate[1]\n      ];\n    default:\n      return [0, 0];\n  }\n}\nfunction getBoundaryPosition(position) {\n  switch (position) {\n    case PLACEMENT.T:\n    case PLACEMENT.TL:\n    case PLACEMENT.TR:\n      return PLACEMENT.T;\n    case PLACEMENT.B:\n    case PLACEMENT.BL:\n    case PLACEMENT.BR:\n      return PLACEMENT.B;\n    case PLACEMENT.L:\n    case PLACEMENT.LT:\n    case PLACEMENT.LB:\n      return PLACEMENT.L;\n    case PLACEMENT.R:\n    case PLACEMENT.RT:\n    case PLACEMENT.RB:\n      return PLACEMENT.R;\n    default:\n      return PLACEMENT.T;\n  }\n}\nfunction changePosition(position, direction) {\n  switch (direction) {\n    case PLACEMENT.T:\n      switch (position) {\n        case PLACEMENT.B:\n          return PLACEMENT.T;\n        case PLACEMENT.BL:\n          return PLACEMENT.TL;\n        case PLACEMENT.BR:\n          return PLACEMENT.TR;\n        default:\n          return position;\n      }\n    case PLACEMENT.B:\n      switch (position) {\n        case PLACEMENT.T:\n          return PLACEMENT.B;\n        case PLACEMENT.TL:\n          return PLACEMENT.BL;\n        case PLACEMENT.TR:\n          return PLACEMENT.BR;\n        default:\n          return position;\n      }\n    case PLACEMENT.L:\n      switch (position) {\n        case PLACEMENT.R:\n          return PLACEMENT.L;\n        case PLACEMENT.RT:\n          return PLACEMENT.LT;\n        case PLACEMENT.RB:\n          return PLACEMENT.LB;\n        default:\n          return position;\n      }\n    case PLACEMENT.R:\n      switch (position) {\n        case PLACEMENT.L:\n          return PLACEMENT.R;\n        case PLACEMENT.LT:\n          return PLACEMENT.RT;\n        case PLACEMENT.LB:\n          return PLACEMENT.RB;\n        default:\n          return position;\n      }\n    default:\n      return position;\n  }\n}\nfunction getFitPosition(position, popupPosition, containerRect, popWH, triggerRect, translate, direction, overflow, changePosOnly, needMaxHeight, needMaxWidth) {\n  const viewPortSize = [\n    document.documentElement.clientWidth || window.innerWidth,\n    document.documentElement.clientHeight || window.innerHeight\n  ];\n  const boundary = [\n    overflow ? Math.max(containerRect.left, 0) : 0,\n    overflow ? Math.max(containerRect.top, 0) : 0,\n    overflow ? Math.min(containerRect.left + containerRect.width, viewPortSize[0]) : viewPortSize[0],\n    overflow ? Math.min(containerRect.top + containerRect.height, viewPortSize[1]) : viewPortSize[1]\n  ];\n  const x = containerRect.left + popupPosition[0];\n  const y = containerRect.top + popupPosition[1];\n  const popRect = [\n    x,\n    y,\n    x + popWH.width,\n    y + popWH.height\n  ];\n  const triggerX = containerRect.left + triggerRect.left;\n  const triggerY = containerRect.top + triggerRect.top;\n  const triggerEx = triggerX + triggerRect.width;\n  const triggerEy = triggerY + triggerRect.height;\n  let finalPosition = position;\n  if (direction === PLACEMENT.T) {\n    if (y < boundary[1]) {\n      if (boundary[3] - triggerEy + translate[1] >= popWH.height && triggerEy - translate[1] >= boundary[1]) {\n        popupPosition[1] = getPopupOffset(PLACEMENT.B, triggerRect, popWH, [translate[0], -translate[1]])[1];\n        finalPosition = changePosition(position, PLACEMENT.B);\n      } else if (!changePosOnly) {\n        popupPosition[1] = overflow ? 0 : -containerRect.top;\n      }\n    } else if (!changePosOnly && popRect[3] > boundary[3]) {\n      popupPosition[1] = overflow ? Math.max(containerRect.height - popWH.height, 0) : viewPortSize[1] - containerRect.top - popWH.height;\n    }\n  } else if (direction === PLACEMENT.B) {\n    if (popRect[3] > boundary[3]) {\n      if (triggerY - boundary[1] - translate[1] >= popWH.height && triggerY - translate[1] <= boundary[3]) {\n        popupPosition[1] = getPopupOffset(PLACEMENT.T, triggerRect, popWH, [translate[0], -translate[1]])[1];\n        finalPosition = changePosition(position, PLACEMENT.T);\n      } else if (!changePosOnly) {\n        popupPosition[1] = overflow ? Math.max(containerRect.height - popWH.height, 0) : viewPortSize[1] - containerRect.top - popWH.height;\n      }\n    } else if (!changePosOnly && y < boundary[1]) {\n      popupPosition[1] = overflow ? 0 : -containerRect.top;\n    }\n  } else if (direction === PLACEMENT.L) {\n    if (x < boundary[0]) {\n      if (boundary[2] - triggerEx + translate[0] >= popWH.width && triggerEx - translate[0] >= boundary[0]) {\n        finalPosition = changePosition(position, PLACEMENT.R);\n        popupPosition[0] = getPopupOffset(PLACEMENT.R, triggerRect, popWH, [-translate[0], translate[1]])[0];\n      } else if (!changePosOnly) {\n        popupPosition[0] = overflow ? 0 : -containerRect.left;\n      }\n    } else if (!changePosOnly && popRect[2] > boundary[2]) {\n      popupPosition[0] = overflow ? Math.max(containerRect.width - popWH.width, 0) : viewPortSize[0] - containerRect.left + popWH.width;\n    }\n  } else if (direction === PLACEMENT.R) {\n    if (popRect[2] > boundary[2]) {\n      if (triggerX - boundary[0] - translate[0] >= popWH.width && triggerX - translate[0] <= boundary[2]) {\n        finalPosition = changePosition(position, PLACEMENT.L);\n        popupPosition[0] = getPopupOffset(PLACEMENT.L, triggerRect, popWH, [-translate[0], translate[1]])[0];\n      } else if (!changePosOnly) {\n        popupPosition[0] = overflow ? Math.max(containerRect.width - popWH.width, 0) : viewPortSize[0] - containerRect.left + popWH.width;\n      }\n    } else if (!changePosOnly && x < boundary[0]) {\n      popupPosition[0] = overflow ? 0 : -containerRect.left;\n    }\n  }\n  if (direction === PLACEMENT.T || direction === PLACEMENT.B) {\n    if (x < boundary[0]) {\n      const isBr = finalPosition === PLACEMENT.BR;\n      const l = triggerX - translate[0];\n      if ((isBr || finalPosition === PLACEMENT.TR) && l >= 0 && l + popWH.width <= boundary[2]) {\n        popupPosition[0] = l - containerRect.left;\n        finalPosition = isBr ? PLACEMENT.BL : PLACEMENT.TL;\n      } else {\n        popupPosition[0] = overflow ? Math.max(-containerRect.left, 0) : -containerRect.left;\n      }\n    } else if (popRect[2] > boundary[2]) {\n      const isBl = finalPosition === PLACEMENT.BL;\n      const l = triggerEx - translate[0];\n      if ((isBl || finalPosition === PLACEMENT.TL) && l <= boundary[2] && l - popWH.width >= boundary[0]) {\n        popupPosition[0] = l - containerRect.left - popWH.width;\n        finalPosition = isBl ? PLACEMENT.BR : PLACEMENT.TR;\n      } else {\n        popupPosition[0] = overflow ? boundary[2] - containerRect.left - popWH.width : viewPortSize[0] - containerRect.left + popWH.width;\n      }\n    }\n  } else if (direction === PLACEMENT.L || direction === PLACEMENT.R) {\n    if (y < boundary[1]) {\n      const isRb = finalPosition === PLACEMENT.RB;\n      const t = triggerY - translate[1];\n      if ((isRb || finalPosition === PLACEMENT.LB) && t >= boundary[1] && t + popWH.height <= boundary[3]) {\n        popupPosition[1] = t - containerRect.top;\n        finalPosition = isRb ? PLACEMENT.RT : PLACEMENT.LT;\n      } else {\n        popupPosition[1] = overflow ? Math.max(-containerRect.top, 0) : -containerRect.top;\n      }\n    } else if (popRect[3] > boundary[3]) {\n      const isRt = finalPosition === PLACEMENT.RT;\n      const t = triggerEy - translate[1];\n      if ((isRt || finalPosition === PLACEMENT.LT) && t <= boundary[3] && t - popWH.height >= boundary[1]) {\n        popupPosition[1] = t - containerRect.top - popWH.height;\n        finalPosition = isRt ? PLACEMENT.RB : PLACEMENT.LB;\n      } else {\n        popupPosition[1] = overflow ? boundary[3] - containerRect.top - popWH.height : viewPortSize[1] - containerRect.top - popWH.height;\n      }\n    }\n  }\n  let maxHeight = 0;\n  let maxWidth = 0;\n  if (needMaxHeight) {\n    if (direction === PLACEMENT.T || finalPosition === PLACEMENT.LT || finalPosition === PLACEMENT.RT) {\n      maxHeight = Math.min(popupPosition[1] + popWH.height, boundary[3] - boundary[1]);\n      if (popupPosition[1] < 0 && triggerRect.top > 0)\n        popupPosition[1] = 0;\n    } else {\n      maxHeight = containerRect.height - popupPosition[1];\n    }\n  }\n  if (needMaxWidth) {\n    if (direction === PLACEMENT.L) {\n      maxWidth = popupPosition[0] + popWH.width;\n      if (popupPosition[0] < 0 && triggerRect.left > 0)\n        popupPosition[0] = 0;\n    } else {\n      maxWidth = containerRect.width - popupPosition[0];\n    }\n  }\n  return [finalPosition, maxHeight, maxWidth];\n}\nfunction getPopStyle(position, containerRect, triggerRect, popWH, translate, autoFit = true, overflow, coverTrigger, arrowWH, hideOnInvisible, changePosOnly, needMaxHeight, needMaxWidth) {\n  const triggerOut = triggerRect.left >= containerRect.width || triggerRect.top >= containerRect.height || triggerRect.left + triggerRect.width <= 0 || triggerRect.top + triggerRect.height <= 0;\n  if (hideOnInvisible && triggerOut) {\n    return { position };\n  }\n  let der = getBoundaryPosition(position);\n  if (coverTrigger) {\n    translate = [...translate];\n    if (der === PLACEMENT.T) {\n      translate[1] += triggerRect.height;\n    } else if (der === PLACEMENT.B) {\n      translate[1] -= triggerRect.height;\n    } else if (der === PLACEMENT.L) {\n      translate[0] += triggerRect.width;\n    } else {\n      translate[0] -= triggerRect.width;\n    }\n  }\n  const popupPosition = getPopupOffset(position, triggerRect, popWH, translate);\n  let maxHeight = 0;\n  let maxWidth = 0;\n  if (autoFit) {\n    [position, maxHeight, maxWidth] = getFitPosition(\n      position,\n      popupPosition,\n      containerRect,\n      popWH,\n      triggerRect,\n      translate,\n      der,\n      overflow,\n      changePosOnly,\n      needMaxHeight,\n      needMaxWidth\n    );\n  }\n  let arrowXY;\n  if (!triggerOut && arrowWH) {\n    der = getBoundaryPosition(position);\n    arrowXY = [];\n    const half = [arrowWH.width / 2, arrowWH.height / 2];\n    const isL = der === PLACEMENT.L;\n    if (isL || der === PLACEMENT.R) {\n      arrowXY[1] = triggerRect.top + triggerRect.height / 2 - popupPosition[1] - half[1];\n      if (arrowXY[1] < half[1] || arrowXY[1] > popWH.height - arrowWH.height - half[1]) {\n        arrowXY = void 0;\n      } else {\n        arrowXY[0] = (isL ? maxWidth ? Math.min(maxWidth, popWH.width) : popWH.width : 0) - half[0];\n      }\n    } else {\n      arrowXY[0] = triggerRect.left + triggerRect.width / 2 - popupPosition[0] - half[0];\n      if (arrowXY[0] < half[0] || arrowXY[0] > popWH.width - arrowWH.width - half[0]) {\n        arrowXY = void 0;\n      } else {\n        arrowXY[1] = (der === PLACEMENT.T ? maxHeight ? Math.min(maxHeight, popWH.height) : popWH.height : 0) - half[1];\n      }\n    }\n  }\n  return {\n    xy: popupPosition,\n    arrowXY,\n    position,\n    maxHeight,\n    maxWidth\n  };\n}\nfunction createArrowWrapper() {\n  const arrowEl = $();\n  const style = arrowEl.style;\n  style.position = \"absolute\";\n  style.left = style.top = \"0\";\n  style.zIndex = \"-1\";\n  return arrowEl;\n}\nfunction getTransitionInfo(el) {\n  const styles = window.getComputedStyle(el);\n  const getStyleProperties = (key) => (styles[key] || \"\").split(\", \");\n  const transitionDelays = getStyleProperties(\"transitionDelay\");\n  const transitionDurations = getStyleProperties(\"transitionDuration\");\n  const transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  const animationDelays = getStyleProperties(\"animationDelay\");\n  const animationDurations = getStyleProperties(\"animationDuration\");\n  const animationTimeout = getTimeout(animationDelays, animationDurations);\n  const timeout = Math.max(transitionTimeout, animationTimeout);\n  return {\n    event: timeout > 0 ? transitionTimeout > animationTimeout ? \"transitionend\" : \"animationend\" : void 0,\n    timeout\n  };\n}\nfunction getTimeout(delays, durations) {\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n  return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));\n}\nfunction toMs(s) {\n  return Number(s.slice(0, -1).replace(\",\", \".\")) * 1e3;\n}\nfunction isElClipped(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY\n  } = window.getComputedStyle(element);\n  const o = overflow + overflowY + overflowX;\n  return o.includes(\"hidden\") || o.includes(\"clip\");\n}\nfunction hideDom(el) {\n  const { style } = el;\n  style.opacity = \"0\";\n  style.pointerEvents = \"none\";\n}\nfunction showDom(el) {\n  const { style } = el;\n  style.opacity = style.pointerEvents = \"\";\n}\nfunction isScrollElement(element) {\n  return element.scrollHeight > element.offsetHeight || element.scrollWidth > element.offsetWidth;\n}\nfunction getScrollElements(el, container) {\n  const scrollElements = [];\n  while (el && el !== container) {\n    if (isScrollElement(el)) {\n      scrollElements.push(el);\n    }\n    el = el.parentElement;\n  }\n  if (scrollElements.length)\n    return scrollElements;\n}\nexport {\n  Popper,\n  createArrow\n};\n","import Popper, { EmitType, PopperConfig } from '@nodesign/popper';\nimport { $, addClass } from 'wblib';\nimport { TooltipConfig } from './type';\nimport './index.scss';\n\nconst CLS_PREFIX = 'ndt';\nconst CLS_ARROW = `${CLS_PREFIX}_arrow`;\nconst CLS_CONTENT = `${CLS_PREFIX}_content`;\nconst CLS_ANI = `${CLS_PREFIX}_ani`;\n\nfunction getConfig(c: TooltipConfig): PopperConfig {\n  let { content, arrow } = c;\n  const disabled = content == null || content === '';\n  if (!(content instanceof Element)) {\n    content = $('div', undefined, String(content));\n  }\n  if (arrow !== false && !(arrow instanceof Element)) {\n    arrow = $();\n  }\n  addClass(content as Element, CLS_CONTENT);\n  if (arrow) addClass(arrow as Element, CLS_ARROW);\n  return {\n    emit: EmitType.HOVER,\n    autoScroll: false,\n    closeOnScroll: false,\n    autoUpdate: false,\n    enterable: true,\n    cssName: CLS_ANI,\n    disabled,\n    openDelay: 100,\n    ...c,\n    content,\n    arrow,\n  } as PopperConfig;\n}\n\nexport class Tooltip extends Popper {\n  constructor(config: TooltipConfig) {\n    super(getConfig(config));\n    addClass(this.el, CLS_PREFIX);\n  }\n\n  // @ts-ignore:next-line\n  updateConfig(config: Partial<TooltipConfig>) {\n    const { content, arrow } = config;\n\n    if ('content' in config && content !== this.config.content) {\n      if (content instanceof Element) {\n        addClass(content, CLS_CONTENT);\n      } else {\n        config.content = this.config.content;\n        config.disabled = config.disabled || content == null || content === '';\n        if (config.disabled) this.disable();\n        config.content.textContent = String(content);\n      }\n    }\n\n    if ('arrow' in config && arrow !== this.config.arrow) {\n      if (arrow === true) {\n        config.arrow = this.config.arrow || $(`.${CLS_ARROW}`);\n      } else if (arrow instanceof Element) {\n        addClass(arrow, CLS_ARROW);\n      }\n    }\n\n    super.updateConfig(config as PopperConfig);\n  }\n}\n","import {\n  Tooltip, PLACEMENT, EmitType,\n} from '../src';\n\nwindow.onload = function () {\n  const container = document.querySelector('.container')! as HTMLElement;\n  const c = document.querySelector('.c')! as HTMLElement;\n  const btn = document.querySelector('#btn')! as HTMLElement;\n\n  const cbb = container.getBoundingClientRect();\n\n  c.scrollTop = (2000 - cbb.height) / 2 + 10;\n  c.scrollLeft = (2000 - cbb.width) / 2 + 10;\n\n  requestAnimationFrame(() => {\n    const config = {\n      container,\n      content: 'npm i -S @nodesign/tooltip',\n      trigger: btn,\n      autoPlacement: true,\n      autoUpdate: false,\n      autoScroll: false,\n      closeOnScroll: true,\n      enterable: true,\n      translate: [0, -10],\n      arrow: true,\n      placement: PLACEMENT.T,\n      openDelay: 100,\n      closeDelay: 50,\n      emit: EmitType.HOVER,\n      open: true,\n      cssName: 'ndt_ani',\n    };\n    const popup = new Tooltip(config as any);\n\n    const update = () => {\n      popup.updateConfig(config);\n    };\n\n    const selection = document.querySelector('.section') as HTMLElement;\n    selection.onchange = ({ target }) => {\n      const { name, value, checked } = target as any;\n      if (name === 'cb') {\n        if (value === 'arrow') {\n          config.arrow = checked;\n        } else if (value === 'css') {\n          config.cssName = checked ? 'ndt_ani' : '';\n        } else {\n          config[value] = checked;\n        }\n        update();\n      } else if (name === 'placement') {\n        config.placement = value;\n        update();\n      } else if (name === 'emit') {\n        config.emit = value || undefined;\n        update();\n      }\n    };\n\n    const transXs = document.querySelector('.translate-x-s') as HTMLElement;\n    const transYs = document.querySelector('.translate-y-s') as HTMLElement;\n    const openD = document.querySelector('.open-delay') as HTMLElement;\n    const closeD = document.querySelector('.close-delay') as HTMLElement;\n\n    selection.oninput = ({ target }) => {\n      const { name, value } = target as any;\n      if (name === 'translateX') {\n        transXs.textContent = `${value}px`;\n        config.translate = [Number(value), config.translate[1]];\n        update();\n      } else if (name === 'translateY') {\n        transYs.textContent = `${value}px`;\n        config.translate = [config.translate[0], Number(value)];\n        update();\n      } else if (name === 'openDelay') {\n        openD.textContent = `${value}ms`;\n        config.openDelay = Number(value);\n        update();\n      } else if (name === 'closeDelay') {\n        closeD.textContent = `${value}ms`;\n        config.closeDelay = Number(value);\n        update();\n      }\n    };\n  });\n};\n"],"names":["p","relList","link","processPreload","mutations","mutation","node","getFetchOpts","script","fetchOpts","PLACEMENT","PLACEMENT2","EmitType","EmitType2","isBrowser","isString","o","isFunction","thirdOptsSupported","options","destroyableMap","destroy","key","item","SELECTOR_REGEX","$","desc","attrs","children","classPrefix","match","el","name","value","c","addClass","dom","cls","prefix","oldCls","removeClass","Drag","start","move","end","ev","clamp","n","lower","upper","throttle","fn","ctx","pending","first","args","getChangedAttrs","newV","oldV","updateOld","patch","x","getConfig","config","cfg","Popper","target","_a","_b","config2","onClickOutside","clickOutsideClose","cssName","onEntered","onExited","style","content","container","trigger","isElClipped","getScrollElements","createArrowWrapper","hideDom","changed","k","showDom","oldIsTriggerEl","triggerOpenClass","opened","arrowEl","fromHide","cStyle","needMaxHeight","needMaxWidth","popBcr","containerBcr","arrowBcr","triggerBcr","onBeforeEnter","info","ret","getPopStyle","onBeforePosition","onOpen","xy","diffXY","curXY","maxX","maxY","onClose","onBeforeExit","openDelay","closeDelay","ro","clear","resolve","event","timeout","getTransitionInfo","timer","getPopupOffset","position","triggerRect","popWH","translate","getBoundaryPosition","changePosition","direction","getFitPosition","popupPosition","containerRect","overflow","changePosOnly","viewPortSize","boundary","y","popRect","triggerX","triggerY","triggerEx","triggerEy","finalPosition","isBr","l","isBl","isRb","t","isRt","maxHeight","maxWidth","autoFit","coverTrigger","arrowWH","hideOnInvisible","triggerOut","der","arrowXY","half","isL","styles","getStyleProperties","transitionDelays","transitionDurations","transitionTimeout","getTimeout","animationDelays","animationDurations","animationTimeout","delays","durations","d","toMs","element","overflowX","overflowY","isScrollElement","scrollElements","CLS_PREFIX","CLS_ARROW","CLS_CONTENT","CLS_ANI","arrow","disabled","Tooltip","btn","cbb","popup","update","selection","checked","transXs","transYs","openD","closeD"],"mappings":"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"}